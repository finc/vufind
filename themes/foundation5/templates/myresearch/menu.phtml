<!-- myresearch - MENU.phtml -->
<h4><?= $this->transEsc('Your Account') ?></h4>
<ul class="side-nav">
  <? if ($this->userlist()->getMode() !== 'disabled'): ?>
    <li>
      <a href="<?= $this->url('myresearch-favorites') ?>" class="<?= $this->active == 'favorites' ? ' active' : '' ?>">
        <i class="fa fa-fw fa-star"></i><?= $this->transEsc('Favorites') ?>
      </a>
    </li>
  <? endif; ?>
  <? if ('ils-none' !== $this->ils()->getOfflineMode()): ?>
    <? if ($this->ils()->checkCapability('getMyTransactions')): ?>
      <li>
        <a href="<?= $this->url('myresearch-checkedout') ?>" class="<?= $this->active == 'checkedout' ? ' active' : '' ?>">
          <i class="fa fa-fw fa-book"></i><?= $this->transEsc('Checked Out Items') ?>
        </a>
      </li>
    <? endif; ?>
    <? if ($this->ils()->checkCapability('getMyHolds')): ?>
      <li>
        <a href="<?= $this->url('myresearch-holds') ?>" class="<?= $this->active == 'holds' ? ' active' : '' ?>">
          <i class="fa fa-fw fa-flag"></i><?= $this->transEsc('Holds and Recalls') ?>
        </a>
      </li>
    <? endif; ?>
    <? if ($this->ils()->checkFunction('StorageRetrievalRequests')): ?>
      <li>
        <a href="<?= $this->url('myresearch-storageretrievalrequests') ?>" class="<?= $this->active == 'storageRetrievalRequests' ? ' active' : '' ?>">
          <i class="fa fa-fw fa-archive"></i><?= $this->transEsc('Storage Retrieval Requests') ?>
        </a>
      </li>
    <? endif; ?>
    <? if ($this->ils()->checkFunction('ILLRequests')): ?>
      <li>
        <a href="<?= $this->url('myresearch-illrequests') ?>" class="<?= $this->active == 'ILLRequests' ? ' active' : '' ?>">
          <i class="fa fa-fw fa-comment"></i><?= $this->transEsc('Interlibrary Loan Requests') ?>
        </a>
      </li>
    <? endif; ?>
    <? if ($this->ils()->checkCapability('getMyFines')): ?>
      <li>
        <a href="<?= $this->url('myresearch-fines') ?>" class="<?= $this->active == 'fines' ? ' active' : '' ?>">
          <i class="fa fa-fw fa-euro"></i><?= $this->transEsc('Fines') ?>
        </a>
      </li>
    <? endif; ?>
    <? if ($this->ils()->checkCapability('getMyProfile')): ?>
      <li>
        <a href="<?= $this->url('myresearch-profile') ?>" class="<?= $this->active == 'profile' ? ' active' : '' ?>">
          <i class="fa fa-fw fa-user"></i><?= $this->transEsc('Profile') ?>
        </a>
      </li>
    <? endif; ?>
    <? $user = $this->auth()->isLoggedIn();
    if ($user && $user->libraryCardsEnabled()): ?>
      <li>
        <a href="<?= $this->url('librarycards-home') ?>" class="<?= $this->active == 'librarycards' ? ' active' : '' ?>">
          <i class="fa fa-fw fa-barcode"></i><?= $this->transEsc('Library Cards') ?>
        </a>
      </li>
    <? endif; ?>
  <? endif; ?>
  <? if ($this->accountCapabilities()->getSavedSearchSetting() === 'enabled'): ?>
    <li>
      <a href="<?=$this->url('search-history')?>?require_login" class="list-group-item<?=$this->active == 'history' ? ' active' : ''?>">
        <i class="fa fa-fw fa-search"></i><?= $this->transEsc('history_saved_searches') ?>
      </a>
    </li>
  <? endif; ?>
  <? if ($user = $this->auth()->isLoggedIn()): ?>
    <li>
      <a href="<?= $this->url('myresearch-logout') ?>">
        <i class="fa fa-fw fa-sign-out"></i><?= $this->transEsc("Log Out") ?>
      </a>
    </li>
  <? endif; ?>
</ul>
<? if ($this->auth()->isLoggedIn() && $this->auth()->getManager()->supportsPasswordChange()): ?>
  <h4><?= $this->transEsc('Preferences') ?></h4>
  <ul class="side-nav">
    <li>
      <a href="<?= $this->url('myresearch-changepassword') ?>" class="<?= $this->active == 'newpassword' ? ' active' : '' ?>">
        <i class="fa fa-fw fa-lock"></i><?= $this->transEsc('Change Password') ?>
      </a>
    </li>
  </ul>
<? endif; ?>
<? if ($this->userlist()->getMode() !== 'disabled' && $user = $this->auth()->isLoggedIn()): ?>
  <h4><?= $this->transEsc('Your Lists') ?></h4>
  <ul class="side-nav">
    <li>
      <a href="<?= $this->url('myresearch-favorites') ?>" class="<?= $this->active == 'favorites' ? ' active' : '' ?>">
        <i class="fa fa-fw fa-star"></i><?= $this->transEsc('Your Favorites') ?>
      </a>
    </li>
    <? $lists = $user->getLists() ?>
    <? foreach ($lists as $list): ?>
      <li>
        <a href="<?= $this->url('userList', array('id' => $list['id'])) ?>" class="<?= $this->active == 'list' . $list['id'] ? ' active' : '' ?>">
          <?= $this->escapeHtml($list['title']) ?>
          <span class="label"><?= $list->cnt ?></span>
        </a>
      </li>
    <? endforeach; ?>
    <li>
      <a href="<?= $this->url('editList', array('id' => 'NEW')) ?>" title="<?= $this->transEsc('Create a List') ?>">
        <i class="fa fa-fw fa-plus"></i><?= $this->transEsc('Create a List') ?>
      </a>
    </li>
  </ul>
<? endif ?>
<!-- myresearch - MENU.phtml - end -->