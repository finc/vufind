<!-- auth - abstractbase - LOGIN.phtml -->
<? $account = $this->auth()->getManager(); ?>
<? $sessionInitiator = $account->getSessionInitiator($this->serverUrl($this->url('myresearch-home'))); ?>
<? if (!$sessionInitiator): // display default login form if no login URL provided ?>
  <form method="post" action="<?=$this->url('myresearch-home')?>" name="loginForm">
    <?=$this->auth()->getLoginFields()?>
    <input type="hidden" name="auth_method" value="<?=$account->getAuthMethod()?>">
    <input type="hidden" name="csrf" value="<?=$this->escapeHtmlAttr($account->getCsrfHash(true))?>" />
    <div class="row">
      <div class="small-7 large-9 columns small-offset-5 large-offset-3">
        <? if ($account->supportsCreation()): ?>
          <a class="button small secondary createAccountLink" role="button" href="<?=$this->url('myresearch-account') ?>?auth_method=<?=$account->getAuthMethod()?>"><?=$this->transEsc('Create New Account')?></a>
        <? endif; ?>
        <input class="button small" aria-label="submit form" type="submit" name="processLogin" value="<?=$this->transEsc('Login')?>">
        <? if ($account->supportsRecovery()): ?>
          <br/>
          <a class="button small secondary" role="button" href="<?=$this->url('myresearch-recover') ?>?auth_method=<?=$account->getAuthMethod()?>" data-lightbox-ignore><?=$this->transEsc('Forgot Password')?></a>
        <? endif; ?>
      </div>
    </div>
  </form>
<? else: ?>
  <a href="<?=$this->escapeHtmlAttr($sessionInitiator)?>" data-lightbox-ignore><?=$this->transEsc("Institutional Login")?></a>
<? endif; ?>
<!-- auth - abstractbase - LOGIN.phtml end -->