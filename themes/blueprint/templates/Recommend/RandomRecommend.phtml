<? $recommend = $this->recommend->getResults(); if (count($recommend)> 0): ?>

  <div class="sidegroup">
  <h4><?=$this->transEsc("random_recommendation_title")?></h4>
  <ul class="random <?=$this->recommend->getDisplayMode()?>">
    <? foreach ($recommend as $driver): ?>
      <li>

      <?if($this->recommend->getDisplayMode() === "images" || $this->recommend->getDisplayMode() === "mixed"):?>

        <? /* Display thumbnail if appropriate: */ ?>
        <?=$this->record($driver)->getCover('RandomRecommend', 'small:medium', $this->recordLink()->getUrl($driver)); ?>

      <?endif;?>

       <?if($this->recommend->getDisplayMode() === "standard" || $this->recommend->getDisplayMode() === "mixed"):?>
            <? $formats = $driver->getFormats(); $format = isset($formats[0]) ? $formats[0] : ''; ?>
            <span class="<?=$this->record($driver)->getFormatClass($format)?>">
            <a href="<?=$this->recordLink()->getUrl($driver)?>" class="title">
              <?=$this->record($driver)->getTitleHtml()?>
            </a>
            </span>
            <? $summAuthors = $driver->getPrimaryAuthors(); if (!empty($summAuthors)): ?>
            <br />
            <?=$this->transEsc('By')?>:
            <a href="<?=$this->record($driver)->getLink('author', $summAuthors[0])?>"><?=$this->escapeHtml($summAuthors[0])?></a><? if (count($summAuthors) > 1): ?>, <?=$this->transEsc('more_authors_abbrev')?><? endif; ?>
            <? endif; ?>
            <? $summDate = $driver->getPublicationDates(); if (!empty($summDate)): ?>
            <br/><?=$this->transEsc('Published')?>: (<?=$this->escapeHtml($summDate[0])?>)
            <? endif; ?>
         <?endif;?>
        </li>
      <? endforeach; ?>
    </ul>

  </div>
<?endif;?>
